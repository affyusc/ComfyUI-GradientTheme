const _0x3aebce=_0x59fc;(function(_0x233b10,_0x3153bb){const _0x58dd86=_0x59fc,_0x384a69=_0x233b10();while(!![]){try{const _0x48ce30=-parseInt(_0x58dd86(0x18f))/0x1*(-parseInt(_0x58dd86(0x194))/0x2)+-parseInt(_0x58dd86(0x1a1))/0x3*(-parseInt(_0x58dd86(0x131))/0x4)+parseInt(_0x58dd86(0x18d))/0x5*(-parseInt(_0x58dd86(0x1a9))/0x6)+-parseInt(_0x58dd86(0x19e))/0x7+-parseInt(_0x58dd86(0x1d2))/0x8*(-parseInt(_0x58dd86(0x17d))/0x9)+-parseInt(_0x58dd86(0x13f))/0xa*(parseInt(_0x58dd86(0x1bd))/0xb)+parseInt(_0x58dd86(0x1ab))/0xc*(parseInt(_0x58dd86(0x197))/0xd);if(_0x48ce30===_0x3153bb)break;else _0x384a69['push'](_0x384a69['shift']());}catch(_0x2ed1cf){_0x384a69['push'](_0x384a69['shift']());}}}(_0x3159,0xafdc6));import{app}from'../../scripts/app.js';function addGradientColorOption(){const _0x56ac2c=_0x59fc;if(!window[_0x56ac2c(0x1b1)]||!window['LGraphCanvas'][_0x56ac2c(0x1a6)]){console['error'](_0x56ac2c(0x1af));return;}const _0x155bd0=LGraphCanvas[_0x56ac2c(0x1a6)][_0x56ac2c(0x190)];if(typeof _0x155bd0!==_0x56ac2c(0x1a7)){console[_0x56ac2c(0x1b5)](_0x56ac2c(0x15f));return;}LGraphCanvas[_0x56ac2c(0x1a6)][_0x56ac2c(0x190)]=function(_0x3ac55d,_0x357d72,_0x53056e,_0x2b0dde,_0x13baa2,_0x3e65cd,_0x233a14){const _0x2efb30=_0x56ac2c;if(!_0x3ac55d||!_0x357d72||!_0x53056e)return console[_0x2efb30(0x1d7)]('Missing\x20required\x20parameters\x20in\x20drawNodeShape'),_0x155bd0['call'](this,_0x3ac55d,_0x357d72,_0x53056e,_0x2b0dde,_0x13baa2,_0x3e65cd,_0x233a14);try{_0x357d72['save']();if(_0x3ac55d['gradientColors']&&Array['isArray'](_0x3ac55d[_0x2efb30(0x15d)])&&_0x3ac55d[_0x2efb30(0x15d)][_0x2efb30(0x14e)]>0x0){const _0x3c6a81=_0x3ac55d[_0x2efb30(0x15d)][_0x2efb30(0x141)](0x0,-0x1),_0x2119f8=_0x3ac55d[_0x2efb30(0x15d)][_0x3ac55d[_0x2efb30(0x15d)]['length']-0x1],_0x21c9d9=window[_0x2efb30(0x167)]&&LiteGraph[_0x2efb30(0x1c3)]||0x1e,_0x38369c=_0x53056e[0x1]+_0x21c9d9,_0x4d7162=typeof _0x3ac55d[_0x2efb30(0x183)]==='number'?_0x3ac55d[_0x2efb30(0x183)]:0x0;let _0x59ace4;try{switch(_0x2119f8){case _0x2efb30(0x1d6):_0x59ace4=_0x357d72[_0x2efb30(0x187)](0x0,0x0,_0x53056e[0x0],0x0);break;case'to\x20left':_0x59ace4=_0x357d72['createLinearGradient'](_0x53056e[0x0],0x0,0x0,0x0);break;case _0x2efb30(0x1b7):_0x59ace4=_0x357d72[_0x2efb30(0x187)](0x0,-_0x21c9d9,0x0,_0x38369c);break;case _0x2efb30(0x16f):_0x59ace4=_0x357d72[_0x2efb30(0x187)](0x0,_0x38369c,0x0,-_0x21c9d9);break;case _0x2efb30(0x18a):_0x59ace4=_0x357d72[_0x2efb30(0x187)](0x0,-_0x21c9d9,_0x53056e[0x0],_0x38369c);break;case _0x2efb30(0x1ca):_0x59ace4=_0x357d72[_0x2efb30(0x187)](_0x53056e[0x0],-_0x21c9d9,0x0,_0x38369c);break;case _0x2efb30(0x1a2):_0x59ace4=_0x357d72[_0x2efb30(0x187)](0x0,_0x38369c,_0x53056e[0x0],-_0x21c9d9);break;case _0x2efb30(0x132):_0x59ace4=_0x357d72[_0x2efb30(0x187)](_0x53056e[0x0],_0x38369c,0x0,-_0x21c9d9);break;default:_0x59ace4=_0x357d72[_0x2efb30(0x187)](0x0,-_0x21c9d9,0x0,_0x38369c);}_0x3c6a81&&_0x3c6a81[_0x2efb30(0x14e)]>0x0&&_0x3c6a81[_0x2efb30(0x180)]((_0xff0efa,_0x1e078a)=>{const _0x128f86=_0x2efb30;_0xff0efa&&typeof _0xff0efa===_0x128f86(0x1d1)&&_0x59ace4['addColorStop'](_0x1e078a/(_0x3c6a81[_0x128f86(0x14e)]-0x1),_0xff0efa);});}catch(_0x3a67e9){return console[_0x2efb30(0x1d7)](_0x2efb30(0x1d4),_0x3a67e9),_0x155bd0['call'](this,_0x3ac55d,_0x357d72,_0x53056e,_0x2b0dde,_0x13baa2,_0x3e65cd,_0x233a14);}try{_0x357d72['fillStyle']=_0x59ace4,_0x357d72['beginPath'](),_0x357d72[_0x2efb30(0x1ba)](_0x4d7162,-_0x21c9d9),_0x357d72[_0x2efb30(0x182)](_0x53056e[0x0]-_0x4d7162,-_0x21c9d9),_0x357d72['quadraticCurveTo'](_0x53056e[0x0],-_0x21c9d9,_0x53056e[0x0],-_0x21c9d9+_0x4d7162),_0x357d72[_0x2efb30(0x182)](_0x53056e[0x0],_0x38369c-_0x4d7162),_0x357d72['quadraticCurveTo'](_0x53056e[0x0],_0x38369c,_0x53056e[0x0]-_0x4d7162,_0x38369c),_0x357d72[_0x2efb30(0x182)](_0x4d7162,_0x38369c),_0x357d72[_0x2efb30(0x1cc)](0x0,_0x38369c,0x0,_0x38369c-_0x4d7162),_0x357d72[_0x2efb30(0x182)](0x0,-_0x21c9d9+_0x4d7162),_0x357d72[_0x2efb30(0x1cc)](0x0,-_0x21c9d9,_0x4d7162,-_0x21c9d9),_0x357d72[_0x2efb30(0x1b9)](),_0x357d72[_0x2efb30(0x189)](),_0x357d72[_0x2efb30(0x19d)]=_0x3e65cd?_0x2efb30(0x15b):_0x233a14?_0x2efb30(0x18c):_0x2efb30(0x14a),_0x357d72[_0x2efb30(0x15c)]=0x2,_0x357d72[_0x2efb30(0x154)](),_0x3ac55d[_0x2efb30(0x193)]&&(_0x357d72[_0x2efb30(0x195)]=_0x3ac55d[_0x2efb30(0x1a0)]||_0x2efb30(0x15b),_0x357d72[_0x2efb30(0x1c8)]=_0x2efb30(0x1c1)+(_0x3ac55d[_0x2efb30(0x1be)]||0xe)+'px\x20Arial',_0x357d72[_0x2efb30(0x1bf)]='center',_0x357d72[_0x2efb30(0x1d0)](_0x3ac55d['title'],_0x53056e[0x0]/0x2,-_0x21c9d9/0x2+0x5));}catch(_0x3dd052){return console[_0x2efb30(0x1d7)](_0x2efb30(0x14b),_0x3dd052),_0x357d72[_0x2efb30(0x16b)](),_0x155bd0[_0x2efb30(0x1da)](this,_0x3ac55d,_0x357d72,_0x53056e,_0x2b0dde,_0x13baa2,_0x3e65cd,_0x233a14);}_0x357d72[_0x2efb30(0x16b)](),_0x357d72[_0x2efb30(0x135)](),_0x357d72[_0x2efb30(0x1d8)]=0x0;}_0x155bd0[_0x2efb30(0x1da)](this,_0x3ac55d,_0x357d72,_0x53056e,_0x2b0dde,_0x13baa2,_0x3e65cd,_0x233a14),_0x357d72[_0x2efb30(0x16b)]();this['onDrawNode']&&typeof this['onDrawNode']==='function'&&(_0x357d72['save'](),_0x357d72['globalAlpha']=0x1,this[_0x2efb30(0x192)](_0x3ac55d,_0x357d72,_0x53056e,_0x2b0dde,_0x13baa2,_0x3e65cd,_0x233a14),_0x357d72[_0x2efb30(0x16b)]());if(_0x3ac55d&&_0x3ac55d[_0x2efb30(0x17f)]&&Array[_0x2efb30(0x138)](_0x3ac55d['widgets']))for(const _0x1d7fd3 of _0x3ac55d[_0x2efb30(0x17f)]){if(_0x1d7fd3&&typeof _0x1d7fd3===_0x2efb30(0x148)&&_0x1d7fd3[_0x2efb30(0x199)]===_0x2efb30(0x17e)&&typeof _0x1d7fd3[_0x2efb30(0x1b4)]==='function'){try{_0x357d72['save'](),_0x357d72[_0x2efb30(0x1d8)]=0x1,_0x1d7fd3['onDraw'](_0x357d72,_0x53056e,_0x3ac55d[_0x2efb30(0x1c4)]),_0x357d72['restore']();}catch(_0x38160f){console[_0x2efb30(0x1d7)](_0x2efb30(0x18e),_0x38160f);}break;}}}catch(_0x346d8a){return console['warn']('Error\x20in\x20drawNodeShape:',_0x346d8a),_0x357d72['restore'](),_0x155bd0['call'](this,_0x3ac55d,_0x357d72,_0x53056e,_0x2b0dde,_0x13baa2,_0x3e65cd,_0x233a14);}};}function _0x59fc(_0x2238c0,_0x333095){const _0x31599e=_0x3159();return _0x59fc=function(_0x59fcd7,_0x118db0){_0x59fcd7=_0x59fcd7-0x131;let _0x4746eb=_0x31599e[_0x59fcd7];return _0x4746eb;},_0x59fc(_0x2238c0,_0x333095);}function showGradientColorDialog(){const _0x497fcf=_0x59fc,_0x5d421c=document[_0x497fcf(0x1c0)]('div');_0x5d421c[_0x497fcf(0x145)]='\x0a\x20\x20\x20\x20<h3>设置节点渐变色</h3>\x0a\x20\x20\x20\x20<div\x20class=\x22gradient-settings\x22>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22setting-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22colorCount\x22>渐变颜色数量:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22slider-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>2</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22colorCount\x22\x20min=\x222\x22\x20max=\x228\x22\x20value=\x222\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>8</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22value-display\x22>当前:\x20<span\x20id=\x22colorCountValue\x22>2</span></span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20id=\x22colorInputs\x22\x20class=\x22color-inputs\x22></div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22setting-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22gradientDirection\x22>渐变方向:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22gradientDirection\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22to\x20right\x22>从左到右</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22to\x20left\x22>从右到左</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22to\x20bottom\x22>从上到下</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22to\x20top\x22>从下到上</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22to\x20bottom\x20right\x22>左上到右下</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22to\x20bottom\x20left\x22>右上到左下</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22to\x20top\x20right\x22>左下到右上</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22to\x20top\x20left\x22>右下到左上</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22setting-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22borderRadius\x22>倒角半径:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22slider-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>0</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22borderRadius\x22\x20min=\x220\x22\x20max=\x22200\x22\x20value=\x220\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>200</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22value-display\x22>当前:\x20<span\x20id=\x22borderRadiusValue\x22>0</span>px</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22setting-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22fontColor\x22>字体颜色:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22fontColor\x22\x20value=\x22#ffffff\x22>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20<div\x20class=\x22setting-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22fontSize\x22>字体大小:</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22slider-container\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>10</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22fontSize\x22\x20min=\x2210\x22\x20max=\x22200\x22\x20value=\x2214\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>200</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22value-display\x22>当前:\x20<span\x20id=\x22fontSizeValue\x22>14</span>px</span>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20<button\x20id=\x22applyGradient\x22>应用</button>\x0a\x20\x20',_0x5d421c[_0x497fcf(0x149)][_0x497fcf(0x164)]=_0x497fcf(0x17c),_0x5d421c[_0x497fcf(0x149)][_0x497fcf(0x156)]=_0x497fcf(0x19c),_0x5d421c[_0x497fcf(0x149)][_0x497fcf(0x174)]=_0x497fcf(0x177),_0x5d421c[_0x497fcf(0x149)]['top']=_0x497fcf(0x177),_0x5d421c[_0x497fcf(0x149)][_0x497fcf(0x162)]=_0x497fcf(0x1c6),_0x5d421c[_0x497fcf(0x149)][_0x497fcf(0x142)]=_0x497fcf(0x153),_0x5d421c[_0x497fcf(0x149)][_0x497fcf(0x178)]=_0x497fcf(0x15b),_0x5d421c[_0x497fcf(0x149)]['padding']=_0x497fcf(0x137),_0x5d421c[_0x497fcf(0x149)]['borderRadius']=_0x497fcf(0x186),_0x5d421c[_0x497fcf(0x149)][_0x497fcf(0x13d)]='0\x204px\x206px\x20rgba(0,\x200,\x200,\x200.3)',_0x5d421c[_0x497fcf(0x149)][_0x497fcf(0x15e)]=_0x497fcf(0x181),_0x5d421c[_0x497fcf(0x149)]['width']='300px',_0x5d421c[_0x497fcf(0x149)][_0x497fcf(0x1b8)]=_0x497fcf(0x175),_0x5d421c['style'][_0x497fcf(0x1db)]=_0x497fcf(0x14f);const _0x478732=document[_0x497fcf(0x1c0)](_0x497fcf(0x149));_0x478732['textContent']=_0x497fcf(0x184),_0x5d421c[_0x497fcf(0x18b)](_0x478732),document[_0x497fcf(0x170)][_0x497fcf(0x18b)](_0x5d421c);const _0x509356=_0x5d421c[_0x497fcf(0x16c)]('#colorCount'),_0x727571=_0x5d421c['querySelector'](_0x497fcf(0x16d)),_0x34e363=_0x5d421c[_0x497fcf(0x16c)](_0x497fcf(0x152)),_0x2e7360=_0x5d421c[_0x497fcf(0x16c)](_0x497fcf(0x16a)),_0xb27de5=_0x5d421c['querySelector'](_0x497fcf(0x144)),_0x154344=_0x5d421c[_0x497fcf(0x16c)](_0x497fcf(0x1bb)),_0x14edca=_0x5d421c[_0x497fcf(0x16c)](_0x497fcf(0x179)),_0xcabd24=_0x5d421c[_0x497fcf(0x16c)]('#fontSize'),_0x19ff87=_0x5d421c[_0x497fcf(0x16c)]('#fontSizeValue');_0x509356[_0x497fcf(0x1c7)](_0x497fcf(0x188),()=>{const _0x359d40=_0x497fcf,_0x4b62f0=parseInt(_0x509356[_0x359d40(0x1b6)]);_0x727571[_0x359d40(0x171)]=_0x4b62f0,_0xbf8785(_0x4b62f0),_0x2f008e();});function _0xbf8785(_0x4d4b69){const _0x38c284=_0x497fcf;_0x34e363[_0x38c284(0x145)]='';for(let _0x2bcea9=0x1;_0x2bcea9<=_0x4d4b69;_0x2bcea9++){const _0x35bf42=document[_0x38c284(0x1c0)]('div');_0x35bf42['className']=_0x38c284(0x134),_0x35bf42[_0x38c284(0x145)]=_0x38c284(0x1d5)+_0x2bcea9+_0x38c284(0x150)+_0x2bcea9+_0x38c284(0x140)+_0x2bcea9+_0x38c284(0x172)+_0x21f920()+_0x38c284(0x14d),_0x34e363['appendChild'](_0x35bf42);}_0x34e363[_0x38c284(0x1c5)](_0x38c284(0x155))[_0x38c284(0x180)](_0xc8f161=>{const _0x2a062e=_0x38c284;_0xc8f161[_0x2a062e(0x1c7)](_0x2a062e(0x188),_0x2f008e);});}function _0x21f920(){const _0x93dc70=_0x497fcf;return'#'+Math['floor'](Math[_0x93dc70(0x13b)]()*0xffffff)['toString'](0x10)[_0x93dc70(0x158)](0x6,'0');}_0x2e7360[_0x497fcf(0x1c7)](_0x497fcf(0x188),()=>{const _0x185e6d=_0x497fcf;_0xb27de5[_0x185e6d(0x171)]=_0x2e7360[_0x185e6d(0x1b6)],_0x2f008e();}),_0x154344[_0x497fcf(0x1c7)](_0x497fcf(0x1b3),_0x2f008e),_0x14edca[_0x497fcf(0x1c7)]('input',_0x2f008e),_0xcabd24[_0x497fcf(0x1c7)](_0x497fcf(0x188),()=>{const _0x5234ac=_0x497fcf;_0x19ff87[_0x5234ac(0x171)]=_0xcabd24[_0x5234ac(0x1b6)],_0x2f008e();});function _0x2f008e(){const _0x2b8b9e=_0x497fcf;try{const _0x1e57dc=Array[_0x2b8b9e(0x163)](_0x5d421c['querySelectorAll'](_0x2b8b9e(0x1a4)))[_0x2b8b9e(0x1a3)](_0x1a6d84=>_0x1a6d84[_0x2b8b9e(0x1b6)]),_0x568ec5=_0x154344[_0x2b8b9e(0x1b6)],_0x24c728=parseInt(_0x2e7360['value']),_0xae84d7=_0x14edca['value'],_0x55c48b=parseInt(_0xcabd24[_0x2b8b9e(0x1b6)]);app[_0x2b8b9e(0x1a8)]&&app[_0x2b8b9e(0x1a8)][_0x2b8b9e(0x169)]&&(app[_0x2b8b9e(0x1a8)]['nodes'][_0x2b8b9e(0x180)](_0x9ff957=>{_0x9ff957&&applyGradientToNode(_0x9ff957,_0x1e57dc,_0x568ec5,_0x24c728,_0xae84d7,_0x55c48b);}),saveGradientSettingsToWorkflow(),app[_0x2b8b9e(0x1a8)][_0x2b8b9e(0x1a5)](!![],!![]));}catch(_0x2fd562){console['warn']('Error\x20updating\x20node\x20gradient:',_0x2fd562);}}const _0x1838a2=_0x5d421c[_0x497fcf(0x16c)]('#applyGradient');_0x1838a2[_0x497fcf(0x1c7)](_0x497fcf(0x160),()=>{const _0x3d5a26=_0x497fcf;_0x2f008e(),document[_0x3d5a26(0x170)][_0x3d5a26(0x198)](_0x5d421c);}),_0xbf8785(0x2);}function applyGradientToNode(_0x16ac46,_0x4a52d5,_0x2dd213,_0x53aa63,_0x1db469,_0x4cf783){const _0x53a451=_0x59fc;try{_0x16ac46&&(_0x16ac46['gradientColors']=[..._0x4a52d5,_0x2dd213],_0x16ac46['borderRadius']=_0x53aa63,_0x16ac46['fontColor']=_0x1db469,_0x16ac46[_0x53a451(0x1be)]=_0x4cf783);}catch(_0x4246a7){console[_0x53a451(0x1d7)](_0x53a451(0x17b),_0x4246a7);}}function saveGradientSettingsToWorkflow(){const _0x539167=_0x59fc;try{if(!app[_0x539167(0x1a8)])return;!app[_0x539167(0x1a8)]['extra']&&(app[_0x539167(0x1a8)]['extra']={}),app['graph'][_0x539167(0x169)]&&app[_0x539167(0x1a8)][_0x539167(0x169)][_0x539167(0x14e)]>0x0&&app[_0x539167(0x1a8)][_0x539167(0x169)][0x0][_0x539167(0x15d)]&&(app[_0x539167(0x1a8)][_0x539167(0x1ae)]['globalGradientNodeSettings']={'gradientColors':app[_0x539167(0x1a8)][_0x539167(0x169)][0x0]['gradientColors'],'borderRadius':app['graph'][_0x539167(0x169)][0x0][_0x539167(0x183)],'fontColor':app[_0x539167(0x1a8)][_0x539167(0x169)][0x0][_0x539167(0x1a0)],'fontSize':app['graph']['nodes'][0x0]['fontSize']});}catch(_0x1b9980){console[_0x539167(0x1d7)](_0x539167(0x191),_0x1b9980);}}function loadGradientSettingsFromWorkflow(){const _0x34b13a=_0x59fc;try{if(!app[_0x34b13a(0x1a8)]||!app[_0x34b13a(0x1a8)]['extra']||!app[_0x34b13a(0x1a8)][_0x34b13a(0x1ae)]['globalGradientNodeSettings'])return;const _0x501565=app[_0x34b13a(0x1a8)][_0x34b13a(0x1ae)][_0x34b13a(0x136)];if(!_0x501565)return;app[_0x34b13a(0x1a8)][_0x34b13a(0x169)]&&app['graph'][_0x34b13a(0x169)][_0x34b13a(0x180)](_0x48b0b1=>{const _0x10da3b=_0x34b13a;_0x48b0b1&&applyGradientToNode(_0x48b0b1,_0x501565[_0x10da3b(0x15d)][_0x10da3b(0x141)](0x0,-0x1),_0x501565[_0x10da3b(0x15d)][_0x501565[_0x10da3b(0x15d)][_0x10da3b(0x14e)]-0x1],_0x501565[_0x10da3b(0x183)],_0x501565['fontColor'],_0x501565[_0x10da3b(0x1be)]);});}catch(_0xe9ca9f){console[_0x34b13a(0x1d7)]('Error\x20loading\x20gradient\x20settings:',_0xe9ca9f);}}function applyGradientSettingsToAllNodes(){const _0x2e5083=_0x59fc;try{loadGradientSettingsFromWorkflow(),app[_0x2e5083(0x1a8)]&&app[_0x2e5083(0x1a8)][_0x2e5083(0x1a5)](!![],!![]);}catch(_0x2b28d3){console[_0x2e5083(0x1d7)]('Error\x20applying\x20gradient\x20settings\x20to\x20all\x20nodes:',_0x2b28d3);}}function _0x3159(){const _0x4448d4=['rgba(0,0,0,0.5)','Error\x20drawing\x20node:','workflow:loaded','\x22>\x0a\x20\x20\x20\x20\x20\x20','length','auto','\x22>颜色\x20','Comfy.GradientNodeColor','#colorInputs','#1e1e1e','stroke','input[type=color]','zIndex','preventDefault','padStart','parentElement','Error\x20registering\x20extension:','#ffffff','lineWidth','gradientColors','fontFamily','Original\x20drawNodeShape\x20method\x20not\x20found','click','offsetTop','transform','from','position','clientY','innerHeight','LiteGraph','white','nodes','#borderRadius','restore','querySelector','#colorCountValue','设置\x20Comfy.GradientNodeColor\x20扩展','to\x20top','body','textContent','\x22\x20value=\x22','Error\x20in\x20extension\x20setup:','left','80vh','400px','50%','color','#fontColor','clientX','Error\x20applying\x20gradient\x20to\x20node:','fixed','11440539bLGDqG','preview','widgets','forEach','Arial,\x20sans-serif','lineTo','borderRadius','\x0a\x20\x20\x20\x20.gradient-settings\x20{\x0a\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20gap:\x2020px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.setting-group\x20{\x0a\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20gap:\x208px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.color-inputs\x20{\x0a\x20\x20\x20\x20\x20\x20display:\x20grid;\x0a\x20\x20\x20\x20\x20\x20grid-template-columns:\x20repeat(auto-fit,\x20minmax(60px,\x201fr));\x0a\x20\x20\x20\x20\x20\x20gap:\x2010px;\x0a\x20\x20\x20\x20\x20\x20margin-bottom:\x2010px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.color-input\x20{\x0a\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.color-input\x20label\x20{\x0a\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20margin-bottom:\x204px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.slider-container\x20{\x0a\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20align-items:\x20center;\x0a\x20\x20\x20\x20\x20\x20gap:\x2010px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.slider-container\x20span\x20{\x0a\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20color:\x20#aaa;\x0a\x20\x20\x20\x20\x20\x20min-width:\x2020px;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20input[type=\x22range\x22]\x20{\x0a\x20\x20\x20\x20\x20\x20flex-grow:\x201;\x0a\x20\x20\x20\x20\x20\x20background:\x20#333;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20select,\x20input[type=\x22color\x22]\x20{\x0a\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20\x20\x20padding:\x205px;\x0a\x20\x20\x20\x20\x20\x20margin-top:\x202px;\x0a\x20\x20\x20\x20\x20\x20background:\x20#333;\x0a\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20\x20\x20border:\x201px\x20solid\x20#555;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20button\x20{\x0a\x20\x20\x20\x20\x20\x20background-color:\x20#4CAF50;\x0a\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20padding:\x2010px;\x0a\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20text-decoration:\x20none;\x0a\x20\x20\x20\x20\x20\x20display:\x20block;\x0a\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20margin:\x2020px\x20auto\x200;\x0a\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20border-radius:\x205px;\x0a\x20\x20\x20\x20\x20\x20width:\x20100%;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20h3\x20{\x0a\x20\x20\x20\x20\x20\x20margin-top:\x200;\x0a\x20\x20\x20\x20\x20\x20margin-bottom:\x2020px;\x0a\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20color:\x20#fff;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.value-display\x20{\x0a\x20\x20\x20\x20\x20\x20font-size:\x2012px;\x0a\x20\x20\x20\x20\x20\x20color:\x20#aaa;\x0a\x20\x20\x20\x20}\x0a\x20\x20','offsetWidth','10px','createLinearGradient','input','fill','to\x20bottom\x20right','appendChild','#90ffe0','5xqobeZ','Error\x20drawing\x20preview\x20widget:','524893vnUhkN','drawNodeShape','Error\x20saving\x20gradient\x20settings:','onDrawNode','title','4qWqtqY','fillStyle','DOMContentLoaded','3926pPDgwD','removeChild','name','width','div','1000','strokeStyle','7905058Hilazq','\x0a\x20\x20\x20\x20<h2\x20style=\x22text-align:\x20center;\x20color:\x20#4CAF50;\x20margin-top:\x200;\x22>欢迎使用由悟空打造的炫酷插件\x20</h2>\x0a\x20\x20\x20\x20<p>这个插件是由<strong>抖音大师兄（AIGC）</strong>创建的，让你在构建工作流的时候可以不那么无聊了，不再是一个单调的灰色主题。</p>\x0a\x20\x20\x20\x20<p>我们提供以下服务：</p>\x0a\x20\x20\x20\x20<ul>\x0a\x20\x20\x20\x20\x20\x20<li>ComfyUI工作流定制</li>\x0a\x20\x20\x20\x20\x20\x20<li>工作流出售</li>\x0a\x20\x20\x20\x20\x20\x20<li>ComfyUI课程</li>\x0a\x20\x20\x20\x20</ul>\x0a\x20\x20\x20\x20<p>有需求请联系微信：<strong>xiutuxiaoliu</strong></p>\x0a\x20\x20\x20\x20<button\x20id=\x22closeIntroWindow\x22\x20style=\x22\x0a\x20\x20\x20\x20\x20\x20background-color:\x20#4CAF50;\x0a\x20\x20\x20\x20\x20\x20color:\x20white;\x0a\x20\x20\x20\x20\x20\x20border:\x20none;\x0a\x20\x20\x20\x20\x20\x20padding:\x2010px\x2020px;\x0a\x20\x20\x20\x20\x20\x20text-align:\x20center;\x0a\x20\x20\x20\x20\x20\x20text-decoration:\x20none;\x0a\x20\x20\x20\x20\x20\x20display:\x20inline-block;\x0a\x20\x20\x20\x20\x20\x20font-size:\x2016px;\x0a\x20\x20\x20\x20\x20\x20margin:\x204px\x202px;\x0a\x20\x20\x20\x20\x20\x20cursor:\x20pointer;\x0a\x20\x20\x20\x20\x20\x20border-radius:\x205px;\x0a\x20\x20\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20\x20\x20right:\x2010px;\x0a\x20\x20\x20\x20\x20\x20bottom:\x2010px;\x0a\x20\x20\x20\x20\x22>关闭</button>\x0a\x20\x20','fontColor','25863NuCGQM','to\x20top\x20right','map','#colorInputs\x20input[type=color]','setDirtyCanvas','prototype','function','graph','3576714lcuNDT','readyState','4404nBgsZR','registerExtension','stopPropagation','extra','LGraphCanvas\x20not\x20found','0\x204px\x206px\x20rgba(0,\x200,\x200,\x200.3)','LGraphCanvas','Error\x20in\x20delayed\x20setup:','change','onDraw','error','value','to\x20bottom','maxHeight','closePath','moveTo','#gradientDirection','mouseup','1079375HPcqDp','fontSize','textAlign','createElement','bold\x20','gradient-palette-button\x20remove-button','NODE_TITLE_HEIGHT','size','querySelectorAll','translate(-50%,\x20-50%)','addEventListener','font','getElementById','to\x20bottom\x20left','rgba(30,\x2030,\x2030,\x200.95)','quadraticCurveTo','className','loading','90%','fillText','string','8TpYlcO','mousedown','Error\x20creating\x20gradient:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20for=\x22color','to\x20right','warn','globalAlpha','max','call','overflowY','52PJMlcu','to\x20top\x20left','min','color-input','save','globalGradientNodeSettings','20px','isArray','head','\x0a\x20\x20\x20\x20.gradient-buttons-container\x20{\x0a\x20\x20\x20\x20\x20\x20position:\x20absolute;\x0a\x20\x20\x20\x20\x20\x20top:\x2060px;\x0a\x20\x20\x20\x20\x20\x20left:\x2060px;\x0a\x20\x20\x20\x20\x20\x20display:\x20flex;\x0a\x20\x20\x20\x20\x20\x20flex-direction:\x20column;\x0a\x20\x20\x20\x20\x20\x20gap:\x208px;\x0a\x20\x20\x20\x20\x20\x20z-index:\x20999;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.gradient-palette-button\x20{\x0a\x20\x20\x20\x20\x20\x20padding:\x2012px;\x0a\x20\x20\x20\x20\x20\x20background:\x20#2d2d2d;\x0a\x20\x20\x20\x20\x20\x20border:\x202px\x20solid\x20#666;\x0a\x20\x20\x20\x20\x20\x20border-radius:\x208px;\x0a\x20\x20\x20\x20\x20\x20cursor:\x20move;\x0a\x20\x20\x20\x20\x20\x20font-size:\x2020px;\x0a\x20\x20\x20\x20\x20\x20box-shadow:\x200\x202px\x206px\x20rgba(0,0,0,0.3);\x0a\x20\x20\x20\x20\x20\x20transition:\x20transform\x200.1s;\x0a\x20\x20\x20\x20\x20\x20user-select:\x20none;\x0a\x20\x20\x20\x20\x20\x20pointer-events:\x20auto;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.gradient-palette-button:hover\x20{\x0a\x20\x20\x20\x20\x20\x20transform:\x20scale(1.1);\x0a\x20\x20\x20\x20\x20\x20border-color:\x20#888;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.remove-button\x20{\x0a\x20\x20\x20\x20\x20\x20background:\x20#3d2d2d;\x0a\x20\x20\x20\x20\x20\x20border-color:\x20#866;\x0a\x20\x20\x20\x20}\x0a\x20\x20\x20\x20.remove-button:hover\x20{\x0a\x20\x20\x20\x20\x20\x20border-color:\x20#c88;\x0a\x20\x20\x20\x20}\x0a\x20\x20','random','graph-canvas','boxShadow','Error\x20in\x20workflow:loaded\x20handler:','10UWUqMz','</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22color','slice','background','top','#borderRadiusValue','innerHTML','closeIntroWindow','gradient-buttons-container','object','style'];_0x3159=function(){return _0x4448d4;};return _0x3159();}function removeGradientFromAllNodes(){const _0x54b518=_0x59fc;try{if(!app['graph']||!app['graph']['nodes'])return;app[_0x54b518(0x1a8)][_0x54b518(0x169)][_0x54b518(0x180)](_0x45f850=>{const _0x41862a=_0x54b518;_0x45f850&&(delete _0x45f850[_0x41862a(0x15d)],delete _0x45f850['borderRadius'],delete _0x45f850[_0x41862a(0x1a0)],delete _0x45f850[_0x41862a(0x1be)]);}),app[_0x54b518(0x1a8)][_0x54b518(0x1ae)]&&delete app[_0x54b518(0x1a8)]['extra'][_0x54b518(0x136)],app[_0x54b518(0x1a8)]['setDirtyCanvas'](!![],!![]);}catch(_0x17525d){console['warn']('Error\x20removing\x20gradients:',_0x17525d);}}function addDraggableButton(){const _0x35c525=_0x59fc,_0x56261a=document[_0x35c525(0x1c0)]('div');_0x56261a[_0x35c525(0x1cd)]=_0x35c525(0x147);const _0x58bf76=document[_0x35c525(0x1c0)](_0x35c525(0x19b));_0x58bf76[_0x35c525(0x145)]='🐵',_0x58bf76['className']='gradient-palette-button';const _0x467cd0=document[_0x35c525(0x1c0)](_0x35c525(0x19b));_0x467cd0[_0x35c525(0x145)]='❌',_0x467cd0[_0x35c525(0x1cd)]=_0x35c525(0x1c2),_0x56261a['appendChild'](_0x58bf76),_0x56261a['appendChild'](_0x467cd0);const _0x2ca907=document['createElement']('style');_0x2ca907[_0x35c525(0x171)]=_0x35c525(0x13a),document[_0x35c525(0x139)]['appendChild'](_0x2ca907);let _0x4b3587=![],_0x5ab66c,_0x6d2348;_0x56261a['addEventListener'](_0x35c525(0x1d3),_0xd6b31a=>{const _0x46bcca=_0x35c525;_0x4b3587=!![],_0x5ab66c=_0xd6b31a['clientX']-_0x56261a['offsetLeft'],_0x6d2348=_0xd6b31a[_0x46bcca(0x165)]-_0x56261a[_0x46bcca(0x161)],_0xd6b31a[_0x46bcca(0x157)](),_0xd6b31a[_0x46bcca(0x1ad)]();}),document[_0x35c525(0x1c7)]('mousemove',_0x123567=>{const _0x2d4f28=_0x35c525;if(_0x4b3587){const _0x8c12e1=_0x123567[_0x2d4f28(0x17a)]-_0x5ab66c,_0x5939f0=_0x123567[_0x2d4f28(0x165)]-_0x6d2348,_0x129c28=window['innerWidth']-_0x56261a[_0x2d4f28(0x185)],_0x3cc685=window[_0x2d4f28(0x166)]-_0x56261a['offsetHeight'];_0x56261a['style'][_0x2d4f28(0x174)]=Math['min'](Math[_0x2d4f28(0x1d9)](0x0,_0x8c12e1),_0x129c28)+'px',_0x56261a['style'][_0x2d4f28(0x143)]=Math[_0x2d4f28(0x133)](Math[_0x2d4f28(0x1d9)](0x0,_0x5939f0),_0x3cc685)+'px';}}),document[_0x35c525(0x1c7)](_0x35c525(0x1bc),()=>{_0x4b3587=![];}),_0x58bf76[_0x35c525(0x1c7)](_0x35c525(0x160),_0x2153c8=>{const _0x211114=_0x35c525;_0x2153c8[_0x211114(0x157)](),_0x2153c8[_0x211114(0x1ad)](),!_0x4b3587&&showGradientColorDialog();}),_0x467cd0[_0x35c525(0x1c7)]('click',_0x140c39=>{const _0x45b83c=_0x35c525;_0x140c39[_0x45b83c(0x157)](),_0x140c39[_0x45b83c(0x1ad)](),!_0x4b3587&&removeGradientFromAllNodes();});if(document[_0x35c525(0x1aa)]===_0x35c525(0x1ce))document[_0x35c525(0x1c7)](_0x35c525(0x196),()=>{const _0x17c924=_0x35c525,_0x566470=document[_0x17c924(0x1c9)]('graph-canvas');_0x566470?_0x566470[_0x17c924(0x159)][_0x17c924(0x18b)](_0x56261a):document['body'][_0x17c924(0x18b)](_0x56261a);});else{const _0x152b7c=document[_0x35c525(0x1c9)](_0x35c525(0x13c));_0x152b7c?_0x152b7c[_0x35c525(0x159)][_0x35c525(0x18b)](_0x56261a):document[_0x35c525(0x170)][_0x35c525(0x18b)](_0x56261a);}}function showIntroductionWindow(){const _0x59876b=_0x59fc,_0x154b46=document[_0x59876b(0x1c0)]('div');_0x154b46[_0x59876b(0x149)][_0x59876b(0x164)]=_0x59876b(0x17c),_0x154b46[_0x59876b(0x149)][_0x59876b(0x143)]=_0x59876b(0x177),_0x154b46[_0x59876b(0x149)][_0x59876b(0x174)]='50%',_0x154b46[_0x59876b(0x149)][_0x59876b(0x162)]=_0x59876b(0x1c6),_0x154b46['style'][_0x59876b(0x142)]=_0x59876b(0x1cb),_0x154b46[_0x59876b(0x149)][_0x59876b(0x178)]=_0x59876b(0x168),_0x154b46[_0x59876b(0x149)]['padding']=_0x59876b(0x137),_0x154b46[_0x59876b(0x149)][_0x59876b(0x183)]=_0x59876b(0x186),_0x154b46['style'][_0x59876b(0x13d)]=_0x59876b(0x1b0),_0x154b46[_0x59876b(0x149)][_0x59876b(0x156)]='10000',_0x154b46[_0x59876b(0x149)]['maxWidth']=_0x59876b(0x176),_0x154b46['style'][_0x59876b(0x19a)]=_0x59876b(0x1cf),_0x154b46[_0x59876b(0x149)][_0x59876b(0x15e)]=_0x59876b(0x181),_0x154b46[_0x59876b(0x145)]=_0x59876b(0x19f),document['body'][_0x59876b(0x18b)](_0x154b46),document[_0x59876b(0x1c9)](_0x59876b(0x146))[_0x59876b(0x1c7)](_0x59876b(0x160),function(){const _0x5b8c3d=_0x59876b;document[_0x5b8c3d(0x170)][_0x5b8c3d(0x198)](_0x154b46);});}const ext={'name':_0x3aebce(0x151),async 'setup'(){const _0x8ab226=_0x3aebce;try{console['log'](_0x8ab226(0x16e)),await new Promise(_0x5ee21a=>{const _0x2b3a19=()=>{const _0x457043=_0x59fc;window['LiteGraph']&&window[_0x457043(0x1b1)]?_0x5ee21a():setTimeout(_0x2b3a19,0x64);};_0x2b3a19();}),addGradientColorOption(),await new Promise(_0x5f1552=>{const _0x4103e3=()=>{const _0x4ca254=_0x59fc;app['ui']&&app[_0x4ca254(0x1a8)]?_0x5f1552():setTimeout(_0x4103e3,0x64);};_0x4103e3();}),setTimeout(()=>{const _0x35d30d=_0x8ab226;try{addDraggableButton(),showIntroductionWindow();}catch(_0x1b35c6){console['warn'](_0x35d30d(0x1b2),_0x1b35c6);}},0x3e8),app['graph']&&app[_0x8ab226(0x1a8)][_0x8ab226(0x169)]&&applyGradientToAllNodes(),app['ui']['on'](_0x8ab226(0x14c),()=>{const _0x192b62=_0x8ab226;try{app[_0x192b62(0x1a8)]&&app[_0x192b62(0x1a8)][_0x192b62(0x169)]&&applyGradientSettingsToAllNodes();}catch(_0x2fcd85){console[_0x192b62(0x1d7)](_0x192b62(0x13e),_0x2fcd85);}});}catch(_0x252704){console['error'](_0x8ab226(0x173),_0x252704);}}};try{app[_0x3aebce(0x1ac)](ext);}catch(_0x4ff717){console['error'](_0x3aebce(0x15a),_0x4ff717);}